<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCtRcoyzyX2Lv4rspUxVChuqFp7SS5QHxc&libraries=places"></script>

<script type="text/javascript">
  google.maps.event.addDomListener(window, 'load', intilize);
  function intilize() {
    var autocomplete = new google.maps.places.Autocomplete(document.getElementById("txtautocomplete"));
    var aautocomplete = new google.maps.places.Autocomplete(document.getElementById("autocomplete"));

    google.maps.event.addListener(autocomplete, 'place_changed', function () {

      var place = autocomplete.getPlace();
    });

  };

</script>






<h2 align="center">Search rides added by drivers</h2>
<br>

<div class="bootstrap-iso">
  <div class="container-fluid">
    <div class="row">
      <div class="col-xs-12">
        <div class="form-horizontal">

          <%= search_form_for @q do |f| %>

              <div class="form-group ">
                <div class="control-label col-sm-2">
                  <%= f.label :origin_cont, 'From' %>
                </div>
                <div class="col-sm-8">
                  <%= f.search_field :origin_cont, class: 'form-control', placeholder: 'From', id:"txtautocomplete" %>
                </div>
              </div>

              <div class="form-group ">
                <div class="control-label col-sm-2 ">
                  <%= f.label :destination_cont, 'To' %>
                </div>
                <div class="col-sm-8">
                  <%= f.search_field :destination_cont, class: 'form-control', placeholder: 'To', id:"autocomplete" %>
                </div>
              </div>

              <div class="form-group ">
                <div class="control-label col-sm-2 ">
                  <%= f.label :departuredate_cont, 'On' %>
                </div>
                <div class="col-sm-8">
                  <%= f.search_field :departuredate_cont, class: 'form-control', placeholder: 'MM/DD/YYYY' %>
                </div>
              </div>

              <div class="form-group">
                <div class="col-sm-offset-2 col-sm-8">
                  <div>
                    <%= f.submit 'Search', class: 'btn btn-primary' %>
                  </div>
                </div>
              </div>

          <% end %>

        </div>
      </div>
    </div>
  </div>
</div>

<% if @driverrides.present? %>


    <% @driverrides.each do |driverride| %>
        <div class="well col-xs-14 col-xs-offset">
          <div class="container-fluid">
            <div class="row">

              <div class="col-lg-3">
                <h4><b>Origin</b></h4>
                <hr>
                <p>
                  <b>Origin</b>: &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<%= driverride.origin %>
                </p>
                <hr>
              </div>

              <div class="col-lg-3">
                <h4><b>Destination</b></h4>
                <hr>
                <p>
                  <b>Destination</b>: &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<%= driverride.destination %>
                </p>
                <hr>
              </div>

            </div>


            <div class="row">

              <div class="col-lg-3">
                <p><b>On</b>: <%= driverride.departuredate %> <b>At</b>: <%= driverride.departuretime.hour %>:<%= driverride.departuretime.min %></p>
                <p><b>Posted by</b>: <%= driverride.user.username %></p>
              </div>


            </div>

            <br>


            <div class="row">
              <div class="col-lg-6">
                <div class="driverride-actions">
                  <% if driverride.user == current_user %>
                      <%= link_to 'View Details', driverride_path(driverride), class: "btn btn-info" %>
                      <% @rangedd = Requestfordm.where('(driverride_id = ?) AND (status = ?)', driverride.id, 'Accepted') %>

                      <% if @rangedd.present? %>

                      <% else %>

                      <%= link_to 'Edit', edit_driverride_path(driverride), class: "btn btn-success" %>
                      <%= link_to 'Delete', driverride_path(driverride), method: :delete,
                                  data: { confirm: "Are you sure you want to delete this ride?"},
                                  class: "btn btn-danger"%>
                          <% end %>
                  <% else %>
                      <%= link_to 'View Details', driverride_path(driverride), class: "btn btn-info" %>
                      <%= link_to 'Add Ride', driverride_path(driverride), class: "btn btn-primary" %>
                      <%= link_to 'Message', driverride_path(driverride), class: "btn btn-warning" %>
                  <% end %>

                </div>
              </div>
            </div>
          </div>
        </div>
    <% end %>


    <% else %>

    <div class="well col-xs-14 col-xs-offset">
      <div class="container-fluid">
        <div class="row">
          <h4 align="center">Oops, no results found!</h4>
        </div>
      </div>
    </div>
<% end %>